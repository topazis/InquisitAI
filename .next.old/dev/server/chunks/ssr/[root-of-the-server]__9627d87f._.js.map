{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/steve/inquisitai/app/demo/page.tsx"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport OpenAI from \"openai\";\r\n\r\nconst openai = new OpenAI({\r\n  apiKey: process.env.OPENAI_API_KEY,\r\n});\r\n\r\nexport async function POST(req: NextRequest) {\r\n  if (!process.env.OPENAI_API_KEY) {\r\n    return NextResponse.json(\r\n      { error: \"OPENAI_API_KEY is not set on the server.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n\r\n  try {\r\n    const body = await req.json();\r\n    const prompt: string = body?.prompt;\r\n    const presetId: string | undefined = body?.presetId;\r\n\r\n    if (!prompt || typeof prompt !== \"string\") {\r\n      return NextResponse.json(\r\n        { error: \"Missing or invalid 'prompt'.\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const systemPrompt = `\r\nYou are InquistAI, an investigative AI that analyzes claims, questions, and digital authenticity.\r\nStructure your response with clear sections:\r\n\r\nüîé Title line\r\nüìù Summary (short, neutral)\r\nüß† Reasoning Layer (bullet points)\r\nüé§ Authenticity Layer (only if relevant to identity/audio; otherwise 1 short line saying it's not applicable)\r\n‚úÖ Verdict (with a confidence score between 0 and 1)\r\n\r\nKeep it concise but substantive. No markdown headings, just use the emojis as markers. Avoid repeating the user's wording excessively.\r\n    `.trim();\r\n\r\n    const completion = await openai.chat.completions.create({\r\n      model: \"gpt-4.1-mini\",\r\n      messages: [\r\n        {\r\n          role: \"system\",\r\n          content: systemPrompt,\r\n        },\r\n        {\r\n          role: \"user\",\r\n          content: `Preset: ${presetId ?? \"custom\"}\\n\\nUser prompt:\\n${prompt}`,\r\n        },\r\n      ],\r\n      temperature: 0.4,\r\n      max_tokens: 800,\r\n    });\r\n\r\n    const text =\r\n      completion.choices[0]?.message?.content ||\r\n      \"InquistAI could not generate a response. Please try again.\";\r\n\r\n    return NextResponse.json({ result: text });\r\n  } catch (err) {\r\n    console.error(\"Investigate API error:\", err);\r\n    return NextResponse.json(\r\n      { error: \"Internal server error while running investigation.\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;;;AAEA,MAAM,SAAS,IAAI,iLAAM,CAAC;IACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;AACpC;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAE;QAC/B,OAAO,8IAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2C,GACpD;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,SAAiB,MAAM;QAC7B,MAAM,WAA+B,MAAM;QAE3C,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU;YACzC,OAAO,8IAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA+B,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,eAAe,CAAC;;;;;;;;;;;IAWtB,CAAC,CAAC,IAAI;QAEN,MAAM,aAAa,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YACtD,OAAO;YACP,UAAU;gBACR;oBACE,MAAM;oBACN,SAAS;gBACX;gBACA;oBACE,MAAM;oBACN,SAAS,CAAC,QAAQ,EAAE,YAAY,SAAS,kBAAkB,EAAE,QAAQ;gBACvE;aACD;YACD,aAAa;YACb,YAAY;QACd;QAEA,MAAM,OACJ,WAAW,OAAO,CAAC,EAAE,EAAE,SAAS,WAChC;QAEF,OAAO,8IAAY,CAAC,IAAI,CAAC;YAAE,QAAQ;QAAK;IAC1C,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,8IAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAqD,GAC9D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}