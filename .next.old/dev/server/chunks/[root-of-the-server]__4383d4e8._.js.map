{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/steve/inquisitai/app/api/investigate/route.ts"],"sourcesContent":["// app/api/investigate/route.ts\r\nimport OpenAI from \"openai\";\r\n\r\nexport const runtime = \"nodejs\";\r\n\r\ntype RiskLevel = \"LOW\" | \"MEDIUM\" | \"HIGH\";\r\n\r\ntype InvestigationResult = {\r\n  summary: string;\r\n  risk: {\r\n    level: RiskLevel;\r\n    confidence: number; // 0..1\r\n    rationale: string[];\r\n  };\r\n  findings: {\r\n    reasoning: string[];\r\n    authenticity?: string[];\r\n  };\r\n  actionPlan: {\r\n    doNow: string[];\r\n    doNotDo: string[];\r\n    verify: string[];\r\n    escalateWhen: string[];\r\n  };\r\n  notes?: string;\r\n};\r\n\r\ntype PresetId = \"simulation\" | \"voicemail\" | \"brain10\" | \"custom\" | string;\r\n\r\nfunction clamp01(n: number) {\r\n  if (!Number.isFinite(n)) return 0.5;\r\n  return Math.max(0, Math.min(1, n));\r\n}\r\n\r\nfunction isRiskLevel(x: unknown): x is RiskLevel {\r\n  return x === \"LOW\" || x === \"MEDIUM\" || x === \"HIGH\";\r\n}\r\n\r\nfunction asStringArray(x: unknown): string[] {\r\n  if (!Array.isArray(x)) return [];\r\n  return x.map((v) => String(v)).filter((s) => s.trim().length > 0);\r\n}\r\n\r\nfunction normalizeResult(x: any): InvestigationResult | null {\r\n  if (!x || typeof x !== \"object\") return null;\r\n\r\n  const summary = typeof x.summary === \"string\" ? x.summary : \"\";\r\n  const risk = x.risk ?? {};\r\n  const findings = x.findings ?? {};\r\n  const actionPlan = x.actionPlan ?? {};\r\n\r\n  const level: RiskLevel = isRiskLevel(risk.level) ? risk.level : \"MEDIUM\";\r\n  const confidence = clamp01(Number(risk.confidence));\r\n\r\n  const out: InvestigationResult = {\r\n    summary: summary.trim() || \"No summary provided.\",\r\n    risk: {\r\n      level,\r\n      confidence,\r\n      rationale: asStringArray(risk.rationale),\r\n    },\r\n    findings: {\r\n      reasoning: asStringArray(findings.reasoning),\r\n      authenticity:\r\n        findings.authenticity === undefined ? undefined : asStringArray(findings.authenticity),\r\n    },\r\n    actionPlan: {\r\n      doNow: asStringArray(actionPlan.doNow),\r\n      doNotDo: asStringArray(actionPlan.doNotDo),\r\n      verify: asStringArray(actionPlan.verify),\r\n      escalateWhen: asStringArray(actionPlan.escalateWhen),\r\n    },\r\n    notes: typeof x.notes === \"string\" ? x.notes : undefined,\r\n  };\r\n\r\n  // Hard minimums so UI never breaks\r\n  if (out.risk.rationale.length === 0) out.risk.rationale = [\"Insufficient structured rationale returned.\"];\r\n  if (out.findings.reasoning.length === 0) out.findings.reasoning = [\"Insufficient structured reasoning returned.\"];\r\n\r\n  if (out.actionPlan.doNow.length === 0) out.actionPlan.doNow = [\"Pause and avoid acting on urgency until verified.\"];\r\n  if (out.actionPlan.doNotDo.length === 0) out.actionPlan.doNotDo = [\"Do not send money, credentials, or codes based on this message alone.\"];\r\n  if (out.actionPlan.verify.length === 0) out.actionPlan.verify = [\"Verify using a known-good contact method (not replies/links provided in the message).\"];\r\n  if (out.actionPlan.escalateWhen.length === 0) out.actionPlan.escalateWhen = [\"If money/accounts are at risk, contact your bank/service provider immediately.\"];\r\n\r\n  return out;\r\n}\r\n\r\nfunction buildFallback(presetId: PresetId, prompt: string): InvestigationResult {\r\n  const p = (prompt || \"\").trim();\r\n\r\n  if (presetId === \"voicemail\") {\r\n    return {\r\n      summary:\r\n        \"This resembles a classic high-pressure payment scam (urgent request + gift cards + vague story). Treat as high risk until verified offline.\",\r\n      risk: {\r\n        level: \"HIGH\",\r\n        confidence: 0.92,\r\n        rationale: [\r\n          \"Urgent money request and time pressure\",\r\n          \"Gift cards are untraceable / irreversible\",\r\n          \"Vague context and no verifiable details\",\r\n          \"Matches known impersonation/CEO-fraud patterns\",\r\n        ],\r\n      },\r\n      findings: {\r\n        reasoning: [\r\n          \"The combination of urgency + secrecy + unusual payment method is a strong scam signature.\",\r\n          \"Even if the voice is real, the behavior is unsafe—verification is required before any action.\",\r\n        ],\r\n        authenticity: [\r\n          \"Voice realism can’t be confirmed from text alone.\",\r\n          \"AI voice or real voice both remain possible; the risk comes from the request pattern.\",\r\n        ],\r\n      },\r\n      actionPlan: {\r\n        doNow: [\r\n          \"Do not pay or reply with details.\",\r\n          \"Call the person using a known-good number from your contacts (not the message).\",\r\n          \"If this is a workplace scenario, notify your manager/IT/security channel.\",\r\n        ],\r\n        doNotDo: [\r\n          \"Do not buy gift cards or share the codes.\",\r\n          \"Do not click links or install apps suggested by the message.\",\r\n          \"Do not continue the conversation on the same channel until verified.\",\r\n        ],\r\n        verify: [\r\n          \"Use an independent channel (phone call, in-person, official company directory).\",\r\n          \"Ask for a verification detail only the real person would know (non-public, non-guessable).\",\r\n        ],\r\n        escalateWhen: [\r\n          \"If any money was sent: contact the retailer and your bank immediately.\",\r\n          \"If credentials were shared: reset passwords and enable MFA right away.\",\r\n          \"If this targets a business: file an incident with IT/security.\",\r\n        ],\r\n      },\r\n      notes:\r\n        \"Fallback report shown because live investigation was unavailable. Treat this as decision support, not legal/financial advice.\",\r\n    };\r\n  }\r\n\r\n  if (presetId === \"brain10\") {\r\n    return {\r\n      summary:\r\n        \"The “10% of our brain” claim is a myth. Neuroscience shows widespread brain activity across tasks and time.\",\r\n      risk: {\r\n        level: \"LOW\",\r\n        confidence: 0.93,\r\n        rationale: [\r\n          \"Brain imaging shows broad activation patterns\",\r\n          \"Evolutionary and clinical evidence contradicts unused brain tissue\",\r\n          \"The claim is commonly traced to misinterpretations of early neuroscience\",\r\n        ],\r\n      },\r\n      findings: {\r\n        reasoning: [\r\n          \"Different regions activate based on task demands; even at rest, networks are active.\",\r\n          \"Brain injuries affecting small regions can cause major deficits—implying those regions matter.\",\r\n        ],\r\n      },\r\n      actionPlan: {\r\n        doNow: [\r\n          \"Treat the claim as false unless specific peer-reviewed evidence is provided.\",\r\n          \"Ask the source for a credible citation (textbook, journal article).\",\r\n        ],\r\n        doNotDo: [\r\n          \"Do not share the claim as fact.\",\r\n          \"Do not use it to justify expensive “brain unlocking” products.\",\r\n        ],\r\n        verify: [\r\n          \"Cross-check using reputable sources (major medical institutions, neuroscience textbooks).\",\r\n          \"Look for peer-reviewed reviews rather than blogs repeating the myth.\",\r\n        ],\r\n        escalateWhen: [\r\n          \"If someone is selling a product/service using this claim, treat it as a marketing red flag.\",\r\n        ],\r\n      },\r\n      notes:\r\n        \"Fallback report shown because live investigation was unavailable.\",\r\n    };\r\n  }\r\n\r\n  if (presetId === \"simulation\") {\r\n    return {\r\n      summary:\r\n        \"The simulation hypothesis is philosophically interesting but currently lacks direct scientific tests that could confirm it.\",\r\n      risk: {\r\n        level: \"LOW\",\r\n        confidence: 0.78,\r\n        rationale: [\r\n          \"Primarily philosophical reasoning rather than testable evidence\",\r\n          \"No widely accepted empirical signature\",\r\n          \"Depends on assumptions about future computation and motivations\",\r\n        ],\r\n      },\r\n      findings: {\r\n        reasoning: [\r\n          \"Arguments like Bostrom’s explore probability and incentives, not measurement.\",\r\n          \"Scientific plausibility is limited by lack of falsifiable predictions in mainstream form.\",\r\n        ],\r\n      },\r\n      actionPlan: {\r\n        doNow: [\r\n          \"Treat it as a philosophical position, not established science.\",\r\n          \"Separate ‘interesting’ from ‘proven’ when discussing it.\",\r\n        ],\r\n        doNotDo: [\r\n          \"Do not treat it as evidence for conspiracy-style claims.\",\r\n          \"Do not confuse probability arguments with experimental confirmation.\",\r\n        ],\r\n        verify: [\r\n          \"Ask: what would count as falsifying evidence?\",\r\n          \"Look for peer-reviewed discussions in philosophy of mind / physics foundations.\",\r\n        ],\r\n        escalateWhen: [\r\n          \"If someone uses it to justify risky decisions (‘nothing is real’), treat it as a mental-health / safety red flag.\",\r\n        ],\r\n      },\r\n      notes:\r\n        \"Fallback report shown because live investigation was unavailable.\",\r\n    };\r\n  }\r\n\r\n  // Generic fallback\r\n  return {\r\n    summary:\r\n      \"Live investigation was unavailable. This report provides a structured risk-and-actions template based on the provided input.\",\r\n    risk: {\r\n      level: \"MEDIUM\",\r\n      confidence: 0.55,\r\n      rationale: [\r\n        \"Not enough verified context to conclude strongly\",\r\n        \"Structured review flags assumptions and verification needs\",\r\n      ],\r\n    },\r\n    findings: {\r\n      reasoning: [\r\n        \"Identify the key claim/request and what evidence would confirm it.\",\r\n        \"Separate what is known vs unknown; avoid acting on urgency without verification.\",\r\n      ],\r\n      authenticity: p ? [\"Authenticity assessment depends on additional data (source, channel, metadata).\"] : undefined,\r\n    },\r\n    actionPlan: {\r\n      doNow: [\r\n        \"Pause and avoid acting on urgency.\",\r\n        \"Collect key details (who/what/when/where) and preserve the message.\",\r\n      ],\r\n      doNotDo: [\r\n        \"Do not send money, credentials, or access codes.\",\r\n        \"Do not click unknown links or install unknown software.\",\r\n      ],\r\n      verify: [\r\n        \"Verify via a known-good channel (official site/number, in-person, internal directory).\",\r\n        \"Ask for corroboration or independent confirmation.\",\r\n      ],\r\n      escalateWhen: [\r\n        \"If money/data/accounts are involved, escalate to the relevant provider or security team.\",\r\n      ],\r\n    },\r\n    notes:\r\n      \"Fallback report shown because live investigation was unavailable.\",\r\n  };\r\n}\r\n\r\nfunction makeSystemPrompt() {\r\n  return [\r\n    \"You are InquistAI, a risk-analysis assistant.\",\r\n    \"Return ONLY valid JSON. No markdown, no backticks, no commentary.\",\r\n    \"Your JSON MUST match this schema:\",\r\n    \"{\",\r\n    '  \"summary\": string,',\r\n    '  \"risk\": { \"level\": \"LOW\"|\"MEDIUM\"|\"HIGH\", \"confidence\": number(0..1), \"rationale\": string[] },',\r\n    '  \"findings\": { \"reasoning\": string[], \"authenticity\"?: string[] },',\r\n    '  \"actionPlan\": { \"doNow\": string[], \"doNotDo\": string[], \"verify\": string[], \"escalateWhen\": string[] },',\r\n    '  \"notes\"?: string',\r\n    \"}\",\r\n    \"Guidance:\",\r\n    \"- Prefer clear, direct language and practical next steps.\",\r\n    \"- If uncertain, say so in rationale and keep confidence lower.\",\r\n    \"- Avoid legal/medical certainty; recommend escalation appropriately.\",\r\n  ].join(\"\\n\");\r\n}\r\n\r\nfunction makeUserPrompt(presetId: PresetId, prompt: string) {\r\n  return [\r\n    `Preset: ${presetId}`,\r\n    \"\",\r\n    \"Analyze the following input for scams, impersonation, urgency, financial risk, and safe response.\",\r\n    \"Return JSON in the required schema.\",\r\n    \"\",\r\n    \"INPUT:\",\r\n    prompt,\r\n  ].join(\"\\n\");\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json().catch(() => null);\r\n\r\n    const prompt = typeof body?.prompt === \"string\" ? body.prompt : \"\";\r\n    const presetId = typeof body?.presetId === \"string\" ? body.presetId : \"custom\";\r\n\r\n    // Optional image support (data URL)\r\n    const imageDataUrl = typeof body?.imageDataUrl === \"string\" ? body.imageDataUrl : null;\r\n\r\n    if (!prompt.trim() && !imageDataUrl) {\r\n      return Response.json(\r\n        { error: \"Missing prompt (and no image provided).\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const apiKey = process.env.OPENAI_API_KEY;\r\n    if (!apiKey) {\r\n      const fallback = buildFallback(presetId, prompt);\r\n      return Response.json(\r\n        { result: fallback, error: \"OPENAI_API_KEY not set — showing fallback.\" },\r\n        { status: 200 }\r\n      );\r\n    }\r\n\r\n    const client = new OpenAI({ apiKey });\r\n\r\n    const model = process.env.OPENAI_MODEL || \"gpt-4o-mini\";\r\n\r\n    const messages: any[] = [\r\n      { role: \"system\", content: makeSystemPrompt() },\r\n      {\r\n        role: \"user\",\r\n        content: imageDataUrl\r\n          ? [\r\n              { type: \"text\", text: makeUserPrompt(presetId, prompt || \"(no text prompt provided)\") },\r\n              { type: \"image_url\", image_url: { url: imageDataUrl } },\r\n            ]\r\n          : makeUserPrompt(presetId, prompt),\r\n      },\r\n    ];\r\n\r\n    const completion = await client.chat.completions.create({\r\n      model,\r\n      messages,\r\n      // This strongly nudges the model to output parseable JSON\r\n      response_format: { type: \"json_object\" },\r\n      temperature: 0.2,\r\n    });\r\n\r\n    const raw = completion.choices?.[0]?.message?.content ?? \"\";\r\n    let parsed: any = null;\r\n\r\n    try {\r\n      parsed = JSON.parse(raw);\r\n    } catch {\r\n      // model returned non-JSON despite response_format\r\n      parsed = null;\r\n    }\r\n\r\n    const normalized = normalizeResult(parsed);\r\n    if (!normalized) {\r\n      const fallback = buildFallback(presetId, prompt);\r\n      return Response.json(\r\n        { result: fallback, error: \"Model returned invalid JSON — showing fallback.\" },\r\n        { status: 200 }\r\n      );\r\n    }\r\n\r\n    return Response.json({ result: normalized }, { status: 200 });\r\n  } catch (err: any) {\r\n    // Last-resort fallback (never 500 the UI)\r\n    const fallback = buildFallback(\"custom\", \"\");\r\n    return Response.json(\r\n      { result: fallback, error: err?.message || \"Server error — showing fallback.\" },\r\n      { status: 200 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}